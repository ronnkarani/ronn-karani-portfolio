{% extends "base.html" %}
{% load static %}
{% load image_filters %}

{% block title %}üë®‚Äçüíª Projects {% endblock %}

{% block content %}
<main class="section projects-page">
  <div class="container">
    <h2 class="section-title">üìö All Projects </h2>
    <div class="project-grid">
      {% for project in projects %}
        <div class="project-card">
          <picture>
            <source srcset="{{ project.image|webp }}" type="image/webp">
            <img src="{{ project.image.url }}" alt="{{ project.title }}" class="project-image" loading="lazy" decoding="async">
          </picture>
          <h3><a href="{% url 'project_details' project.slug %}" style="text-decoration: none;">
            {{ project.title }}
          </a></h3>
          <p>{{ project.description|truncatewords:30|safe }}</p>
          <div class="project-meta">
            <span><i class="uil uil-eye"></i> {{ project.views }} Views</span> 
            <span class="like-count"><i class="uil uil-heart"></i> {{ project.likes }} Likes</span> 
            <span><i class="uil uil-comment-alt-lines"></i> {{project.comments.count}} Comments</span> 

          </div>
          <div class="project-links">
            {% if project.repo_url %}<a href="{{ project.repo_url }}" target="_blank">View Code</a>{% endif %}
            {% if project.live_url %}<a href="{{ project.live_url }}" target="_blank">Live Site</a>{% endif %}
            <a href="{% url 'project_details' project.slug %}" class="more-info">More Info</a>
          </div>
          
        </div>
        {% empty %}
        <p>No projects available yet.</p>
      {% endfor %}

    </div>
    
    <div class="pagination">
  {% if projects.has_previous %}
    <a href="?page=1" class="button button--outline">&laquo; First</a>
    <a href="?page={{ projects.previous_page_number }}" class="button button--outline">Previous</a>
  {% endif %}

  <span class="button disabled">
    Page {{ projects.number }} of {{ projects.paginator.num_pages }}
  </span>

  {% if projects.has_next %}
    <a href="?page={{ projects.next_page_number }}" class="button button--outline">Next</a>
    <a href="?page={{ projects.paginator.num_pages }}" class="button button--outline">Last &raquo;</a>
  {% endif %}
</div>


  </div>
</main>
{% endblock %}
