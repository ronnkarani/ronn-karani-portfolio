{% extends "base.html" %}
{% load static %}

{% block title %}üë®‚Äçüíª{{ project.title }}{% endblock %}

{% block content %}
<main class="section project-details">
  <div class="container">
    <h2 class="project-title">{{ project.title }}</h2>
    <div class="project-meta">
      <span><i class="uil uil-calendar-alt"></i> {{ project.created_at }}</span>
      <span><i class="uil uil-user"></i> {{ project.author }}</span>

      <span><i class="uil uil-eye"></i> {{ project.views }} Views</span> 
      <span>
        <form method="POST" style="display:inline;">
          {% csrf_token %}
          <button type="submit" name="like" title="Like this project" style="all:unset; cursor:pointer;">
            <i class="uil uil-heart"></i>
          </button>
          <span class="like-count">{{ project.likes }} Likes</span> 
        </form>
      </span>
      <span><i class="uil uil-comment-alt-lines"></i> {{project.comments.count}} Comments</span> 

    </div>

    <img src="{{ project.image.url }}" alt="{{ project.title }}" class="project-detail-image"/>

    <div class="project-description">
      {{ project.description|safe }}
      <h4>Technologies Used:</h4>
      <ul>
        {% for tech in project.tech_list %}
          <li>{{ tech }}</li>
        {% endfor %}
      </ul>

      <a href="{{ project.repo_url }}" target="_blank" class="button">View Code</a>
      <a href="{{ project.live_url }}" target="_blank" class="button button--outline">Live Site</a>
    </div>
  
    
    <!-- Comments Section (static for now) -->
<div class="blog-comments">
  <h3><i class="uil uil-comment-alt-lines"></i> {{project.comments.count}} Comments</h3>
  {% for comment in comments %}
    <div class="comment"><p><strong>{{ comment.name }}:</strong> {{ comment.content }}</p></div>
  {% empty %}
    <p>No comments yet.</p>
  {% endfor %}

  <h3><i class="uil uil-comment-alt-lines"></i> Leave a Comment!</h3>
  <form method="POST" class="comment-form">
    {% csrf_token %}
    <div class="form-group">
      <textarea type="text" name="name" placeholder="Your name" class="form-textarea" required></textarea>
    </div>
    <div class="form-group">
      <textarea name="content" placeholder="Leave a comment..." class="form-textarea" required></textarea>
    </div>
    <button type="submit" name="comment" class="btn btn-primary">
      <i class="uil uil-message"></i> Post Comment
    </button>
  </form>
</div>
  </div>
</main>
{% endblock %}
