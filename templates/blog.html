{% extends "base.html" %}
{% load static %}
{% load image_filters %}

{% block title %}👨‍💻 Blog {% endblock %}

{% block content %}
<!-- 📝 Blog Section -->
<section class="section blog-page" id="blog">
  <div class="container">
    <h2 class="section-title">📝 My Blog </h2>
    <div class="blog-grid">
      {% for post in blog_posts %}
      <div class="blog-card">
        <picture>
            <source srcset="{{ post.image|webp }}" type="image/webp">
            <img src="{{ post.image.url }}" alt="{{ post.title }}" class="blog-image" loading="lazy" decoding="async">
          </picture>

        
        <a href="{% url 'blog_detail' post.slug %}" class="blog-title-link" style="text-decoration: none;">
                <h3>{{ post.title }}</h3>
              </a>
        <p>{{ post.excerpt|truncatewords:30|safe }}</p>
        <div class="blog-meta">
          <span><i class="uil uil-calendar-alt"></i> {{ post.created_at }}</span>
          <span><i class="uil uil-user"></i> {{ post.author }}</span>
          <span class="like-count"><i class="uil uil-heart"></i> {{ post.likes }} Likes</span> 
          <span><i class="uil uil-comment-alt-lines"></i> {{ post.comments.count }} Comments</h3></span>
        </div>
        <a href="{% url 'blog_detail' post.slug %}" class="read-more">Read More</a>
      </div>
      {% empty %}
        <p>No blog posts available yet.</p>
      {% endfor %}
    </div>
    
    <div class="pagination">
  {% if blog_posts.has_previous %}
    <a href="?page=1" class="button button--outline">&laquo; First</a>
    <a href="?page={{ blog_posts.previous_page_number }}" class="button button--outline">Previous</a>
  {% endif %}

  <span class="button disabled">
    Page {{ blog_posts.number }} of {{ blog_posts.paginator.num_pages }}
  </span>

  {% if blog_posts.has_next %}
    <a href="?page={{ blog_posts.next_page_number }}" class="button button--outline">Next</a>
    <a href="?page={{ blog_posts.paginator.num_pages }}" class="button button--outline">Last &raquo;</a>
  {% endif %}
</div>


  </div>
</section>
{% endblock %}
